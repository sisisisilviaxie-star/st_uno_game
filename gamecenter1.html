<div class="game-console">
    <div class="header">
        <h3>åŒå±‚æ¸¸æˆä¸­å¿ƒ</h3>
        <div>ç©å®¶: <span id="player-name"></span></div>
    </div>
    
    <div class="game-content">
        <button id="dice-btn" style="padding:10px 20px; font-size:16px;">ğŸ² æ·éª°å­</button>
        
        <!-- è¿™é‡Œæ˜¾ç¤ºç»“æœ -->
        <div id="result-log" style="margin-top:20px; font-size:1.2em; color: cyan;">
            <!-- å†å²ç»“æœä¼šæ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        </div>
    </div>
</div>

<script>
    // è¿™é‡Œçš„å˜é‡æ˜¯ä»æ­£åˆ™æ³¨å…¥è¿›æ¥çš„
    // ST_UserName, ST_InitialData

    $(document).ready(function() {
        // 1. è®¾ç½®åå­—
        if(typeof ST_UserName !== 'undefined') {
            $('#player-name').text(ST_UserName);
        }

        // 2. ã€å…³é”®ã€‘æ¢å¤å†å²æ•°æ®
        // å¦‚æœ ST_InitialData ä¸ä¸ºç©ºï¼Œè¯´æ˜è¿™ä¸ªæ°”æ³¡é‡Œå·²ç»å­˜äº†æ•°æ®ï¼ˆæ¯”å¦‚ "æ·å‡ºäº† 3 ç‚¹"ï¼‰
        if (typeof ST_InitialData !== 'undefined' && ST_InitialData.trim() !== "") {
            // æˆ‘ä»¬çš„æ•°æ®å¯èƒ½æ˜¯çº¯æ–‡æœ¬ï¼Œä¹Ÿå¯èƒ½æ˜¯ JSONï¼Œè¿™é‡Œç®€å•å¤„ç†ä¸ºæ–‡æœ¬
            $('#result-log').text(ST_InitialData);
        } else {
            $('#result-log').text("å‡†å¤‡å¼€å§‹...");
        }

        // 3. æ·éª°å­ç‚¹å‡»äº‹ä»¶
        $('#dice-btn').click(function() {
            // é€»è¾‘è®¡ç®—
            const point = Math.floor(Math.random() * 6) + 1;
            const resultText = `æ·å‡ºäº† ${point} ç‚¹`;

            // ç«‹å³æ›´æ–° UI æ˜¾ç¤ºï¼ˆè®©ç”¨æˆ·è§‰å¾—å¾ˆå¿«ï¼‰
            $('#result-log').text(resultText);

            // 4. ã€å…³é”®ã€‘ä¿å­˜å›æ¥¼å±‚
            // è¿™ä¼šæŠŠ "<GameConsole>æ·å‡ºäº† 3 ç‚¹</GameConsole>" å†™å›å½“å‰æ¶ˆæ¯
            // å¯¼è‡´å½“å‰æ°”æ³¡åˆ·æ–°ï¼Œæ•°æ®è¢«æ°¸ä¹…è®°å½•
            if (window.saveToCurrentLayer) {
                // å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸Šæ—¶é—´æˆ³æˆ–è€…æ›´å¤šæ•°æ®
                // ç®€å•èµ·è§ï¼Œæˆ‘ä»¬åªå­˜ç»“æœæ–‡æœ¬
                window.saveToCurrentLayer(resultText);
            } else {
                console.warn("æœªæ‰¾åˆ° saveToCurrentLayer æ–¹æ³•ï¼Œæ— æ³•ä¿å­˜åˆ°åŒå±‚");
            }
        });
    });
</script>
